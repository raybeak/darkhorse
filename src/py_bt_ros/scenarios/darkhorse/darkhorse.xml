<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="4">
  <BehaviorTree ID="MainTree">

    <Sequence name="HospitalFlow">
      <WaitForQR/> 


      <SpeakAction/> 

      <KeepRunningUntilFailure name="VisitLoop">
        <Sequence name="PerDepartment">

          <Think/>

          <SpeakAction/>

          <ReactiveFallback name="EmergencyOrMove">
            
            <Sequence name="EmergencyReturn">
              <IsEmergencyPressed/>
              <SetAbort/>
              <SpeakAction/>
              <GoToInfoDesk/>
            </Sequence>

            <ReactiveSequence name="NormalMoveReactive">
              <WaitSpeedOK/>
              <Move/>
            </ReactiveSequence>

          </ReactiveFallback>

          <CheckAbort/>

          <SpeakAction/>

          <WaitDoctorDone/>

          <SpeakAction/>

        </Sequence>
      </KeepRunningUntilFailure>

      <ReturnHome/>

      <SendDiagnosisEmail/>

    </Sequence>

  </BehaviorTree>

  <TreeNodesModel>
    <Action ID="WaitForQR"/>
    <Action ID="SpeakAction"/>
    <Action ID="Think"/>
    <Action ID="WaitSpeedOK"/>
    <Action ID="Move"/>
    <Action ID="ReturnHome"/>
    <Action ID="GoToInfoDesk"/> <Action ID="WaitDoctorDone"/>
    <Action ID="SendDiagnosisEmail"/>
    <Action ID="SetAbort"/>
    <Action ID="CheckAbort"/>
    <Control ID="ReactiveSequence"/>

    <Condition ID="IsEmergencyPressed"/>

    <Control ID="KeepRunningUntilFailure"/>
    <Control ID="ReactiveFallback"/>
  </TreeNodesModel>
</root>